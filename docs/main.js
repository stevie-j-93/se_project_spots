!function(){"use strict";var e={858:function(e,t,o){e.exports=o.p+"images/Group26.svg"},989:function(e,t,o){e.exports=o.p+"images/Group27.svg"},263:function(e,t,o){e.exports=o.p+"images/Modalpreview-close.svg"},221:function(e,t,o){e.exports=o.p+"images/Spots.svg"},483:function(e,t,o){e.exports=o.p+"images/avatar.jpg"},619:function(e,t,o){e.exports=o.p+"images/pencil.svg"}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,o),s.exports}o.p="",function(){const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error__visible"},t=(e,t,o)=>{const r=`#${t.id}-error`,n=e.querySelector(r);n&&(n.textContent="",t.classList.remove(o.inputErrorClass),o.errorClass&&n.classList.remove(o.errorClass))},r=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?((e,t)=>{e&&(e.disabled=!0,e.classList.add(t.inactiveButtonClass))})(t,o):((e,t)=>{e&&(e.disabled=!1,e.classList.remove(t.inactiveButtonClass))})(t,o)},n=e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach(o=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),s=e.querySelector(o.submitButtonSelector);r(n,s,o),n.forEach(c=>{c.addEventListener("input",function(){((e,o,r)=>{o.validity.valid?t(e,o,r):((e,t,o,r)=>{const n=`#${t.id}-error`,s=e.querySelector(n);t.classList.add(r.inputErrorClass),s&&(s.textContent=o,t.classList.add(r.inputErrorClass))})(e,o,o.validationMessage,r)})(e,c,o),r(n,s,o)})})})(o,e)})};function s(e,o,n,s){o.forEach(o=>{t(e,o,s)}),r(o,n,s)}n(e);const c=o(221),a=o(483),l=o(619),i=o(858),u=o(989),d=o(263);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".header__logo");e&&(e.src=c);const t=document.querySelector(".profile__avatar");t&&(t.src=a);const o=document.querySelector(".profile__edit-btn img");o&&(o.src=l);const r=document.querySelector(".profile__new-post-btn img");r&&(r.src=i),document.querySelectorAll(".modal__close-btn img.close-btn").forEach(e=>{e.src=u});const n=document.querySelector("#preview-modal .modal__close-btn img");n&&(n.src=d)});const m=document.querySelector(".profile__edit-btn"),p=document.querySelector("#edit-profile-modal"),f=p.querySelector(".modal__close-btn"),_=document.forms["edit-profile-form"],y=p.querySelector("#profile-name-input"),v=p.querySelector("#profile-description-input"),S=document.querySelector(".profile__new-post-btn"),g=document.querySelector("#new-post-modal"),q=g.querySelector(".modal__close-btn"),b=g.querySelector(".modal__submit-btn"),w=g.querySelector(".modal__form"),h=g.querySelector("#card-caption-input"),E=g.querySelector("#card-image-input"),x=document.querySelector("#preview-modal"),L=x.querySelector(".modal__image"),k=x.querySelector(".modal__caption"),C=x.querySelector(".modal__close-btn"),A=document.querySelector("#card-template"),z=document.querySelector(".cards__list");function B(e){const t=A.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),r=t.querySelector(".card__image");r.src=e.link,r.alt=e.name,o.textContent=e.name;const n=t.querySelector(".card__like-btn");return n.addEventListener("click",()=>{n.classList.toggle("card__like-btn_active")}),t.querySelector(".card__delete-btn").addEventListener("click",()=>{t.remove()}),r.addEventListener("click",()=>{L.src=e.link,L.alt=e.name,k.textContent=e.name,T(x)}),t}document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("mousedown",t=>{t.target===e&&$(e)})}),C.addEventListener("click",()=>{$(x)});const j=document.querySelector(".profile__name"),G=document.querySelector(".profile__description");m.addEventListener("click",()=>{y.value=j.textContent.trim(),v.value=G.textContent.trim();const t=p.querySelector(".modal__form");if(T(p),!t)return void console.warn("Edit Profile form not found inside modal.");const o=Array.from(t.querySelectorAll(e.inputSelector)),r=t.querySelector(e.submitButtonSelector);s(t,o,r,e)}),f.addEventListener("click",function(){$(p)}),S.addEventListener("click",function(){const t=w,o=Array.from(t.querySelectorAll(e.inputSelector)),r=t.querySelector(e.submitButtonSelector);s(t,o,r,e),T(g)}),q.addEventListener("click",function(){$(g)}),_.addEventListener("submit",function(e){e.preventDefault(),j.textContent=y.value,G.textContent=v.value,$(p)}),w.addEventListener("submit",function(t){t.preventDefault();const o=B({name:h.value,link:E.value});z.prepend(o),t.target.reset(),disableButton(b,e),$(g)});let M=!1;function D(e){if("Escape"===e.key||"Esc"===e.key){const e=document.querySelector(".modal_is-opened");e&&$(e)}}function T(e){e.classList.add("modal_is-opened"),M||(document.addEventListener("keydown",D),M=!0)}function $(e){e.classList.remove("modal_is-opened"),!document.querySelector(".modal_is-opened")&&M&&(document.removeEventListener("keydown",D),M=!1)}[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(function(e){const t=B(e);z.append(t)}),n(e)}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sb0JBRWxCZ0IsU0FBU25CLGNBQWMscUJBQXVCNEYsSUFDakR6RSxTQUFTNkUsb0JBQW9CLFVBQVdILEdBQ3hDRCxHQUFzQixFQUUxQixDQTdMcUIsQ0FDbkIsQ0FDRWxCLEtBQU0scUJBQ05GLEtBQU0sOEhBRVIsQ0FDRUUsS0FBTSxjQUNORixLQUFNLDJIQUVSLENBQ0VFLEtBQU0scUJBQ05GLEtBQU0sbUhBRVIsQ0FDRUUsS0FBTSxrQkFDTkYsS0FBTSx5SEFFUixDQUNFRSxLQUFNLDREQUNORixLQUFNLDJIQUVSLENBQ0VFLEtBQU0sNEJBQ05GLEtBQU0sMEhBRVIsQ0FDRUUsS0FBTSxpQkFDTkYsS0FBTSw0SEFvS0duRCxRQUFRLFNBQVU0RSxHQUM3QixNQUFNOUIsRUFBY0YsRUFBZWdDLEdBQ25DakMsRUFBVWtDLE9BQU8vQixFQUNuQixHQUVBbkQsRUFBaUI5QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy0xL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMtMS93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLTEvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMtMS8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9fdmlzaWJsZVwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBlcnJvck1zZywgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnSWQgPSBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgO1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoZXJyb3JNc2dJZCk7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgaWYgKCFlcnJvck1zZ0VsKSByZXR1cm47XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBlcnJvck1zZztcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dJZCA9IGAjJHtpbnB1dEVsLmlkfS1lcnJvcmA7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihlcnJvck1zZ0lkKTtcbiAgaWYgKCFlcnJvck1zZ0VsKSByZXR1cm47XG5cbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcblxuICBpZiAoY29uZmlnLmVycm9yQ2xhc3MpIHtcbiAgICBlcnJvck1zZ0VsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFidXR0b25FbCkgcmV0dXJuO1xuICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuY29uc3QgZW5hYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFidXR0b25FbCkgcmV0dXJuO1xuICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICBidXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uKGZvcm1FbCwgaW5wdXRMaXN0LCBidG5FbCwgY29uZmlnKSB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICB9KTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ0bkVsLCBjb25maWcpO1xufVxuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5jb25zdCBsb2dvID0gcmVxdWlyZShcIi4uL2ltYWdlcy9TcG90cy5zdmdcIik7XG5jb25zdCBhdmF0YXIgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL2F2YXRhci5qcGdcIik7XG5jb25zdCBwZW5jaWwgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIik7XG5jb25zdCBwbHVzID0gcmVxdWlyZShcIi4uL2ltYWdlcy9Hcm91cDI2LnN2Z1wiKTtcbmNvbnN0IGNsb3NlWCA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvR3JvdXAyNy5zdmdcIik7XG5jb25zdCBwcmV2aWV3Q2xvc2UgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL01vZGFscHJldmlldy1jbG9zZS5zdmdcIik7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3QgaGVhZGVyTG9nbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19sb2dvXCIpO1xuICBpZiAoaGVhZGVyTG9nbykgaGVhZGVyTG9nby5zcmMgPSBsb2dvO1xuXG4gIGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbiAgaWYgKHByb2ZpbGVBdmF0YXIpIHByb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyO1xuXG4gIGNvbnN0IGVkaXRCdG5JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuIGltZ1wiKTtcbiAgaWYgKGVkaXRCdG5JbWcpIGVkaXRCdG5JbWcuc3JjID0gcGVuY2lsO1xuXG4gIGNvbnN0IG5ld1Bvc3RCdG5JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ0biBpbWdcIik7XG4gIGlmIChuZXdQb3N0QnRuSW1nKSBuZXdQb3N0QnRuSW1nLnNyYyA9IHBsdXM7XG5cbiAgZG9jdW1lbnRcbiAgICAucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnRuIGltZy5jbG9zZS1idG5cIilcbiAgICAuZm9yRWFjaCgoaW1nKSA9PiB7XG4gICAgICBpbWcuc3JjID0gY2xvc2VYO1xuICAgIH0pO1xuXG4gIGNvbnN0IHByZXZpZXdDbG9zZUltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIjcHJldmlldy1tb2RhbCAubW9kYWxfX2Nsb3NlLWJ0biBpbWdcIlxuICApO1xuICBpZiAocHJldmlld0Nsb3NlSW1nKSBwcmV2aWV3Q2xvc2VJbWcuc3JjID0gcHJldmlld0Nsb3NlO1xufSk7XG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVDbG9zZUJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IGVkaXRQcm9maWxlTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLW5hbWUtaW5wdXRcIlxuKTtcbmNvbnN0IGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuXG5jb25zdCBuZXdQb3N0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctcG9zdC1idG5cIik7XG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgbmFtZUlucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1jYXB0aW9uLWlucHV0XCIpO1xuY29uc3QgbGlua0lucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZS1pbnB1dFwiKTtcblxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld0NhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbmNvbnN0IHByZXZpZXdDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIikuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZFRpdGxlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gIGNhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuXG4gIGNvbnN0IGNhcmRMaWtlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjYXJkTGlrZUJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdG5FbC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fYWN0aXZlXCIpO1xuICB9KTtcblxuICBjb25zdCBjYXJkRGVsZXRlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG4gIGNhcmREZWxldGVCdG5FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3Q2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5wcmV2aWV3Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xufSk7XG5cbmNvbnN0IHByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudC50cmltKCk7XG4gIGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50LnRyaW0oKTtcblxuICBjb25zdCBmb3JtRWwgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcblxuICBpZiAoIWZvcm1FbCkge1xuICAgIGNvbnNvbGUud2FybihcIkVkaXQgUHJvZmlsZSBmb3JtIG5vdCBmb3VuZCBpbnNpZGUgbW9kYWwuXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidG5FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgaWYgKHR5cGVvZiByZXNldFZhbGlkYXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJlc2V0VmFsaWRhdGlvbihmb3JtRWwsIGlucHV0TGlzdCwgYnRuRWwsIHNldHRpbmdzKTtcbiAgfSBlbHNlIHtcbiAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ0bkVsLCBzZXR0aW5ncyk7XG4gIH1cbn0pO1xuXG5lZGl0UHJvZmlsZUNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcblxubmV3UG9zdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjb25zdCBmb3JtRWwgPSBhZGRDYXJkRm9ybUVsZW1lbnQ7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidG5FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICByZXNldFZhbGlkYXRpb24oZm9ybUVsLCBpbnB1dExpc3QsIGJ0bkVsLCBzZXR0aW5ncyk7XG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5cbm5ld1Bvc3RDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZUVsLnRleHRDb250ZW50ID0gZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufVxuXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcbiAgICBuYW1lOiBuYW1lSW5wdXQudmFsdWUsXG4gICAgbGluazogbGlua0lucHV0LnZhbHVlLFxuICB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ0biwgc2V0dGluZ3MpO1xuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59XG5cbmFkZENhcmRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG5sZXQgZXNjTGlzdGVuZXJBdHRhY2hlZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBvbkVzY0tleWRvd24oZSkge1xuICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIgfHwgZS5rZXkgPT09IFwiRXNjXCIpIHtcbiAgICBjb25zdCBvcGVuZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBpZiAob3BlbmVkKSBjbG9zZU1vZGFsKG9wZW5lZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG5cbiAgaWYgKCFlc2NMaXN0ZW5lckF0dGFjaGVkKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25Fc2NLZXlkb3duKTtcbiAgICBlc2NMaXN0ZW5lckF0dGFjaGVkID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG5cbiAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKSAmJiBlc2NMaXN0ZW5lckF0dGFjaGVkKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25Fc2NLZXlkb3duKTtcbiAgICBlc2NMaXN0ZW5lckF0dGFjaGVkID0gZmFsc2U7XG4gIH1cbn1cblxuaW5pdGlhbENhcmRzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZHNMaXN0LmFwcGVuZChjYXJkRWxlbWVudCk7XG59KTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsImVycm9yTXNnSWQiLCJpZCIsImVycm9yTXNnRWwiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImVuYWJsZUJ1dHRvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJidXR0b25FbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlc2V0VmFsaWRhdGlvbiIsImJ0bkVsIiwibG9nbyIsInJlcXVpcmUiLCJhdmF0YXIiLCJwZW5jaWwiLCJwbHVzIiwiY2xvc2VYIiwicHJldmlld0Nsb3NlIiwiaGVhZGVyTG9nbyIsInNyYyIsInByb2ZpbGVBdmF0YXIiLCJlZGl0QnRuSW1nIiwibmV3UG9zdEJ0bkltZyIsImltZyIsInByZXZpZXdDbG9zZUltZyIsImVkaXRQcm9maWxlQnRuIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRQcm9maWxlQ2xvc2VCdG4iLCJlZGl0UHJvZmlsZUZvcm0iLCJmb3JtcyIsImVkaXRQcm9maWxlTmFtZUlucHV0IiwiZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwibmV3UG9zdEJ0biIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RDbG9zZUJ0biIsImNhcmRTdWJtaXRCdG4iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJsaW5rSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3Q2FwdGlvbiIsInByZXZpZXdDbG9zZUJ0biIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZUVsIiwiY2FyZEltYWdlRWwiLCJsaW5rIiwiYWx0IiwibmFtZSIsImNhcmRMaWtlQnRuRWwiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImUiLCJ0YXJnZXQiLCJjbG9zZU1vZGFsIiwicHJvZmlsZU5hbWVFbCIsInByb2ZpbGVEZXNjcmlwdGlvbkVsIiwidmFsdWUiLCJ0cmltIiwiY29uc29sZSIsIndhcm4iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJyZXNldCIsImVzY0xpc3RlbmVyQXR0YWNoZWQiLCJvbkVzY0tleWRvd24iLCJrZXkiLCJvcGVuZWQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaXRlbSIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=